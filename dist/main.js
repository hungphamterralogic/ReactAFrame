!function(e){function t(t){for(var o,i,l=t[0],c=t[1],s=t[2],d=0,p=[];d<l.length;d++)i=l[d],r[i]&&p.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(u&&u(t);p.length;)p.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,l=1;l<n.length;l++){var c=n[l];0!==r[c]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={1:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=c;a.push([654,0]),n()}({122:function(e,t,n){e.exports=n.p+"images/location_092a687.png"},123:function(e,t,n){e.exports=n.p+"images/arrow_4758819.png"},124:function(e,t,n){e.exports=n.p+"images/close_74f2693.png"},264:function(e,t,n){e.exports=n.p+"images/whiteplay_97e72fb.png"},265:function(e,t,n){e.exports=n.p+"images/whitepause_82bd10c.png"},266:function(e,t,n){e.exports=n.p+"images/whitefullscreen_6304a61.png"},267:function(e,t,n){e.exports=n.p+"images/play_fda9c7d.png"},268:function(e,t,n){e.exports=n.p+"images/land_6181550.jpg"},269:function(e,t,n){e.exports=n.p+"videos/penguins_125a3b1.mp4"},270:function(e,t,n){e.exports=n.p+"videos/seagulls_4dc3df8.mp4"},271:function(e,t,n){e.exports=n.p+"videos/sharks_a8c112a.mp4"},276:function(e,t){e.exports=[{id:"screen1",name:"penguins",type:"video",url:"penguins",hotspots:[{id:"0",position:{x:0,y:1,z:1},radius:"0.5",type:"info",info:"This is a Rock and it's very ... ROCK!",title:"",tooltip:"Rocky"},{id:"1",position:{x:1,y:.75,z:-3},radius:"0.5",type:"info",info:"This is a Rock and it's very ... ROCK!",title:"",tooltip:"Rocky"},{id:"2",position:{x:7,y:.9,z:-2},radius:"0.5",type:"teleport",fromSecond:1,toSecond:29,nextId:"screen3",title:"",tooltip:"Go to the sand beach"},{id:"3",position:{x:-5,y:.9,z:6},radius:"0.5",type:"teleport",fromSecond:1,toSecond:29,nextId:"screen2",title:"",tooltip:"Go to the grassland"}]},{id:"screen2",name:"land",type:"image",url:"land",hotspots:[{id:"1",position:{x:1,y:.75,z:-7},radius:"0.5",type:"info",info:"This is the grass and it's very ... GREEN!",title:"",tooltip:"Grassy"},{id:"2",position:{x:8,y:.9,z:-6},radius:"0.5",type:"teleport",nextId:"screen3",title:"",tooltip:"Go to the sand beach"},{id:"3",position:{x:5,y:.9,z:9},radius:"0.5",type:"teleport",nextId:"screen1",title:"",tooltip:"Go to the rocky beach"}]},{id:"screen3",name:"seagulls",type:"video",url:"seagulls",hotspots:[{id:"1",position:{x:-2,y:.75,z:4},radius:"0.5",type:"info",info:"This is the sand and it's yellow and ... white!",title:"",tooltip:"Sandy"},{id:"2",position:{x:4,y:.9,z:6},radius:"0.5",type:"teleport",nextId:"screen1",title:"",tooltip:"Go to the rocky beach"},{id:"3",position:{x:3,y:.9,z:-10},radius:"0.5",type:"teleport",nextId:"screen2",title:"",tooltip:"Go to the grassland"}]}]},587:function(e,t,n){var o=n(588);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(80)(o,r);o.locals&&(e.exports=o.locals)},588:function(e,t,n){var o=n(589);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(80)(o,r);o.locals&&(e.exports=o.locals)},589:function(e,t,n){(e.exports=n(179)()).push([e.i,".rangeslider {\n  margin: 20px 0;\n  position: relative;\n  background: #ffffff80;\n  -ms-touch-action: none;\n  touch-action: none;\n  flex: 1; }\n\n.rangeslider,\n.rangeslider .rangeslider__fill {\n  display: block;\n  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.4); }\n\n.rangeslider .rangeslider__handle {\n  background: #888;\n  cursor: pointer;\n  display: inline-block;\n  position: absolute;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4), 0 -1px 3px rgba(0, 0, 0, 0.4); }\n\n.rangeslider .rangeslider__handle .rangeslider__active {\n  opacity: 1; }\n\n.rangeslider .rangeslider__handle-tooltip {\n  width: 40px;\n  height: 40px;\n  text-align: center;\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0.8);\n  font-weight: 400;\n  font-size: 14px;\n  transition: all .1s ease-in;\n  border-radius: 4px;\n  display: inline-block;\n  color: #fff;\n  left: 50%;\n  transform: translate3d(-50%, 0, 0); }\n\n.rangeslider .rangeslider__handle-tooltip span {\n  margin-top: 12px;\n  display: inline-block;\n  line-height: 100%; }\n\n.rangeslider .rangeslider__handle-tooltip:after {\n  content: ' ';\n  position: absolute;\n  width: 0;\n  height: 0; }\n\n.rangeslider-horizontal {\n  height: 12px;\n  border-radius: 10px; }\n\n.rangeslider-horizontal .rangeslider__fill {\n  height: 100%;\n  background-color: #00000080;\n  border-radius: 10px;\n  top: 0; }\n\n.rangeslider-horizontal .rangeslider__handle {\n  width: 30px;\n  height: 30px;\n  border-radius: 30px;\n  top: 50%;\n  transform: translate3d(-50%, -50%, 0); }\n\n.rangeslider-horizontal .rangeslider__handle-tooltip {\n  top: -55px; }\n\n.rangeslider-horizontal .rangeslider__handle-tooltip:after {\n  border-left: 8px solid transparent;\n  border-right: 8px solid transparent;\n  border-top: 8px solid rgba(0, 0, 0, 0.8);\n  left: 50%;\n  bottom: -8px;\n  transform: translate3d(-50%, 0, 0); }\n\n.rangeslider-vertical {\n  margin: 20px auto;\n  height: 150px;\n  max-width: 10px;\n  background-color: transparent; }\n\n.rangeslider-vertical .rangeslider__fill,\n.rangeslider-vertical .rangeslider__handle {\n  position: absolute; }\n\n.rangeslider-vertical .rangeslider__fill {\n  width: 100%;\n  background-color: #000;\n  box-shadow: none;\n  bottom: 0; }\n\n.rangeslider-vertical .rangeslider__handle {\n  width: 30px;\n  height: 10px;\n  left: -10px;\n  box-shadow: none; }\n\n.rangeslider-vertical .rangeslider__handle-tooltip {\n  left: -100%;\n  top: 50%;\n  transform: translate3d(-50%, -50%, 0); }\n\n.rangeslider-vertical .rangeslider__handle-tooltip:after {\n  border-top: 8px solid transparent;\n  border-bottom: 8px solid transparent;\n  border-left: 8px solid rgba(0, 0, 0, 0.8);\n  left: 100%;\n  top: 12px; }\n\n.rangeslider-reverse.rangeslider-horizontal .rangeslider__fill {\n  right: 0; }\n\n.rangeslider-reverse.rangeslider-vertical .rangeslider__fill {\n  top: 0;\n  bottom: inherit; }\n\n.rangeslider__labels {\n  position: relative; }\n\n.rangeslider-vertical .rangeslider__labels {\n  position: relative;\n  list-style-type: none;\n  margin: 0 0 0 24px;\n  padding: 0;\n  text-align: left;\n  width: 250px;\n  height: 100%;\n  left: 10px; }\n\n.rangeslider-vertical .rangeslider__labels .rangeslider__label-item {\n  position: absolute;\n  transform: translate3d(0, -50%, 0); }\n\n.rangeslider-vertical .rangeslider__labels .rangeslider__label-item::before {\n  content: '';\n  width: 10px;\n  height: 2px;\n  background: #000;\n  position: absolute;\n  left: -14px;\n  top: 50%;\n  transform: translateY(-50%);\n  z-index: -1; }\n\n.rangeslider__labels .rangeslider__label-item {\n  position: absolute;\n  font-size: 14px;\n  cursor: pointer;\n  display: inline-block;\n  top: 10px;\n  transform: translate3d(-50%, 0, 0); }\n",""])},651:function(e,t,n){var o=n(652);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(80)(o,r);o.locals&&(e.exports=o.locals)},652:function(e,t,n){var o=n(653);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(80)(o,r);o.locals&&(e.exports=o.locals)},653:function(e,t,n){(e.exports=n(179)()).push([e.i,"body {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  margin: unset; }\n",""])},654:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(81),i=n.n(a),l=n(277),c=n(82),s=n(657);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={app:Object(s.a)({AUTH_USER_SET:function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){u(e,t,n[t])})}return e}({},e,{authUser:t.payload})}},{firebase:null,authUser:null})},p=Object(c.b)(d),f=n(94),m=n.n(f),g=(n(330),n(655),n(332),{REACT_APP_API_KEY:"AIzaSyC2E8xYZ7Q1UKD04u8xsk8ZuVg7GQXtDdk",REACT_APP_AUTH_DOMAIN:"test-project-bb618.firebaseapp.com",REACT_APP_DATABASE_URL:"https://test-project-bb618.firebaseio.com",REACT_APP_PROJECT_ID:"test-project-bb618",REACT_APP_STORAGE_BUCKET:"test-project-bb618.appspot.com",REACT_APP_MESSAGING_SENDER_ID:753412379471});function h(e,t,n,o,r,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(o,r)}function b(e){return function(){var t=this,n=arguments;return new Promise(function(o,r){var a=e.apply(t,n);function i(e){h(a,o,r,i,l,"next",e)}function l(e){h(a,o,r,i,l,"throw",e)}i(void 0)})}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={apiKey:g.REACT_APP_API_KEY,authDomain:g.REACT_APP_AUTH_DOMAIN,databaseURL:g.REACT_APP_DATABASE_URL,projectId:g.REACT_APP_PROJECT_ID,storageBucket:g.REACT_APP_STORAGE_BUCKET,messagingSenderId:g.REACT_APP_MESSAGING_SENDER_ID},E=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"getStorage",function(){return t.storage}),v(this,"getImageUrl",(o=b(regeneratorRuntime.mark(function e(n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o="",e.next=3,t.storage.child("".concat(n)).getDownloadURL().then(function(e){o=e}).catch(function(){return o});case 3:return e.abrupt("return",o);case 4:case"end":return e.stop()}},e,this)})),function(e){return o.apply(this,arguments)})),v(this,"uploadFile",(n=b(regeneratorRuntime.mark(function e(n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(o=t.storage.child("images/".concat(n.name)).put(n)).on(firebase.storage.TaskEvent.STATE_CHANGED,function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is ".concat(t,"% done")),e.state){case firebase.storage.TaskState.PAUSED:console.log("Upload is paused");break;case firebase.storage.TaskState.RUNNING:console.log("Upload is running")}},function(e){e.code},function(){o.snapshot.ref.getDownloadURL().then(function(e){console.log("File available at",e)})});case 2:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})),m.a.initializeApp(y),this.auth=m.a.auth(),this.db=m.a.database(),this.storage=m.a.storage().ref();var n;var o},x=n(54),_=n.n(x),w=n(55),P=n.n(w),S=(n(146),n(147),n(148),n(149),n(150),n(262)),k=(n(178),n(45)),C={info:"infoportal",teleport:"teleportportal"},T={info:"#location",teleport:"#arrow"},I=function(e){return 180*Math.asin(e)/Math.PI},A=function(e){var t=e.onClickPortal,n=e.onHoverPortal,o=e.onBlurPortal,a=e.onCollidePotral,i=e.position,l=i.x,c=i.y,s=i.z,u=e.radius,d=e.type,p=d||"info",f=u||.5,m="".concat(l," ").concat(c," ").concat(s),g="".concat(l," ").concat(c+.25," ").concat(s),h="".concat(l-l/4," ").concat(c," ").concat(s-s/4),b=s<0?-I(l/Math.sqrt(Math.pow(l,2)+Math.pow(s,2))):I(l/Math.sqrt(Math.pow(l,2)+Math.pow(s,2))),v=s>c?-I(c/s):0,y="info"===p?"".concat(v," ").concat(b," 0"):"60 ".concat(b," 0"),E=r.a.createElement("a-animation",{attribute:"position",to:g,direction:"alternate",dur:"500",repeat:"indefinite"}),x=r.a.createElement("a-animation",{attribute:"position",to:h,direction:"alternate",dur:"500",repeat:"indefinite"});return r.a.createElement(k.Entity,{id:C[d],events:{click:t,collided:[a],mouseenter:n,mouseleave:o},primitive:"a-circle",src:T[p],position:m,material:"side: double; color: #EF2D5E; transparent: true; opacity: .8",radius:f,rotation:y},"info"===p?E:x)},O=n(122),j=n.n(O),M=n(123),L=n.n(M),R=n(124),z=n.n(R),N=function(e){var t=e.info,n=e.show,o=e.source.srcUrl,a=e.metadata.hotspots,i=e.onHoverPortal,l=e.onBlurPortal,c=e.onClickPortal,s=e.onCloseInfo,u=e.isEditorMode;return r.a.createElement("div",null,r.a.createElement(k.Scene,null,r.a.createElement("a-assets",null,r.a.createElement("img",{alt:"",id:"skyimage",src:n?o:null}),r.a.createElement("img",{alt:"",id:"location",src:j.a}),r.a.createElement("img",{alt:"",id:"arrow",src:L.a})),r.a.createElement(k.Entity,{primitive:"a-sky",src:"#skyimage"}),a.map(function(e,t){var n=e.type,o=e.position,a=e.title,s=e.id;return r.a.createElement(A,{key:t,type:n,title:a,position:o,onHoverPortal:function(){return i(s)},onBlurPortal:function(){return l(s)},onClickPortal:c(n,s)})}),r.a.createElement(k.Entity,{id:"camera",primitive:"a-camera","mouse-cursor":!0})),t&&r.a.createElement("div",{style:{top:0,width:500,height:200,margin:"5% auto",left:u?200:0,right:0,position:"absolute",borderRadius:10,boxShadow:"3px 3px 10px black",background:"#000000cc",color:"white",padding:10}},r.a.createElement("img",{alt:"",style:{width:24,height:24,position:"absolute",right:"-15px",top:"-15px"},src:z.a,onClick:s}),t))},U=n(14),D=n.n(U),H=n(263),F=n.n(H),B=(n(587),n(264)),G=n.n(B),V=n(265),q=n.n(V),K=n(266),J=n.n(K);function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var W=_()({player:{left:0,right:0,height:50,bottom:0,position:"absolute",background:"#00000080",display:"flex"},editMode:{left:200},icon:{height:30,width:30,opacity:.8,padding:10},timeStatus:{display:"flex",color:"white",alignItems:"center",padding:10}})(function(e){var t,n,a,i=e.classes,l=e.onTogglePlay,c=e.onFullScreen,s=e.onChangeTime,u=e.currentTime,d=e.duration,p=e.isPlaying,f=e.isEditorMode,m=Y(Object(o.useState)(u),2),g=m[0],h=m[1],b=Y(Object(o.useState)(!1),2),v=b[0],y=b[1],E=function(e){return e<10?"0".concat(e):e},x=function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.floor(e%60);return t>0?"".concat(t,":").concat(E(n),":").concat(E(o)):"".concat(E(n),":").concat(E(o))};return r.a.createElement("div",{className:D()(i.player,(t={},n=i.editMode,a=f,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))},r.a.createElement("img",{alt:"",className:i.icon,onClick:l,src:p?q.a:G.a,id:"playButton"}),r.a.createElement(F.a,{min:0,max:d||100,value:v?g:u,onChangeStart:function(){y(!0)},onChange:function(e){h(e)},onChangeComplete:function(){y(!1),s(g)}}),r.a.createElement("div",{className:i.timeStatus},"".concat(x(u),"/").concat(x(d))),r.a.createElement("img",{alt:"",className:i.icon,onClick:c,src:J.a,id:"playButton"}))}),Q=n(267),X=n.n(Q),Z=function(e){var t=e.info,n=e.duration,a=e.currentTime,i=e.isPlaying,l=e.isEditorMode,c=e.show,s=e.source.srcUrl,u=e.metadata.hotspots,d=e.firstLoad,p=e.onLoadedMetadata,f=e.onTimeUpdate,m=e.onHoverPortal,g=e.onBlurPortal,h=e.onClickPortal,b=e.onCloseInfo,v=e.onPlayClick,y=e.onChangeTime,E=e.onTogglePlay,x=e.onFullScreen,_=e.onLoadedVideo;return Object(o.useEffect)(function(){_()},[]),r.a.createElement("div",{style:{height:l?"calc(100% - 100px)":"100%",position:"absolute",width:"100%"}},r.a.createElement(k.Scene,{style:"height: calc(100% - 50px)"},r.a.createElement("a-assets",null,r.a.createElement("video",{id:"video",preload:"metadata",controls:!0,src:c?s:null,onTimeUpdate:f,onLoadedMetadata:p}),r.a.createElement("img",{alt:"",id:"location",src:j.a}),r.a.createElement("img",{alt:"",id:"arrow",src:L.a})),r.a.createElement("a-videosphere",{src:"#video"}),n-a>=1&&u.map(function(e,t){var n=e.type,o=e.position,i=e.title,l=e.id,c=e.fromSecond,s=e.toSecond;return!Boolean(c<=a&&s>=a)&&c&&s?null:r.a.createElement(A,{key:t,type:n,title:i,position:o,onHoverPortal:function(){return m(l)},onBlurPortal:function(){return g(l)},onClickPortal:h(n,l)})}),r.a.createElement(k.Entity,{id:"camera",primitive:"a-camera","mouse-cursor":!0})),t&&r.a.createElement("div",{style:{top:0,width:500,height:200,margin:"5% auto",left:l?200:0,right:0,position:"absolute",borderRadius:10,boxShadow:"3px 3px 10px black",background:"#000000cc",color:"white",padding:10}},r.a.createElement("img",{alt:"",style:{width:24,height:24,position:"absolute",right:"-15px",top:"-15px"},src:z.a,onClick:b}),t),d&&r.a.createElement("div",{id:"playvideo",style:{left:0,right:0,top:0,bottom:0,position:"fixed"},onClick:v},r.a.createElement("img",{alt:"",style:{margin:"5% auto",left:0,right:0,position:"fixed",opacity:.5,color:"white",padding:10},src:X.a,id:"playButton"})),r.a.createElement(W,{isEditorMode:l,currentTime:a,duration:n,isPlaying:i,onChangeTime:y,onTogglePlay:E,onFullScreen:x}))},$=n(268),ee=n.n($),te=n(269),ne=n.n(te),oe=n(270),re=n.n(oe),ae=n(271),ie=n.n(ae);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe={penguins:ne.a,seagulls:re.a,sharks:ie.a},me={land:ee.a},ge=function(e){function t(e){var n,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=se(t).call(this,e),n=!a||"object"!==le(a)&&"function"!=typeof a?de(o):a,pe(de(de(n)),"getScreenFromId",function(e){return P.a.find(n.props.metadata,function(t){return t.id===e})}),pe(de(de(n)),"getHotspotFromId",function(e){return P.a.find(n.state.currentScreenMetaData.hotspots,function(t){return t.id===e})}),pe(de(de(n)),"getToolTipFromId",function(e){var t=n.getHotspotFromId(e);return t?t.tooltip:""}),pe(de(de(n)),"getInfoPortalFromId",function(e){var t=n.getHotspotFromId(e);return t?t.info:""}),pe(de(de(n)),"onClickPortal",function(e,t){return"info"===e?function(){return n.handleClickInfoPortal(t)}:"teleport"===e?function(){return n.handleClickTeleportPortal(t)}:void 0}),pe(de(de(n)),"onHoverPortal",function(e){n.setState({tooltip:n.getToolTipFromId(e)})}),pe(de(de(n)),"onBlurPortal",function(){n.setState({tooltip:null})}),pe(de(de(n)),"handleClickInfoPortal",function(e){console.log(e,"====",n.getInfoPortalFromId(e)),n.setState({info:n.getInfoPortalFromId(e),isPlaying:!1}),n.videoELement&&n.videoELement.pause()}),pe(de(de(n)),"handleClickTeleportPortal",function(e){n.videoELement&&n.videoELement.pause();var t=n.getHotspotFromId(e).nextId,o=n.getScreenFromId(t);n.switchScreen(o)}),pe(de(de(n)),"switchScreen",function(e){var t=2,o=setInterval(function(){n.setState({isSwitching:!0}),(t-=1)<=0&&(clearInterval(o),n.setState({isVideo:"video"===e.type,srcUrl:"video"===e.type?fe[e.url]:me[e.url],currentScreenMetaData:e,firstLoad:!0,tooltip:null,isSwitching:!1}),n.props.onChangeScreen(e.id))},200)}),pe(de(de(n)),"handleCollide",function(){console.log("Collided!")}),pe(de(de(n)),"onCloseInfo",function(){n.setState({info:null,isPlaying:!0}),n.videoELement.play()}),pe(de(de(n)),"onPlayClick",function(){n.videoELement.play(),n.setState({firstLoad:!1,isPlaying:!0})}),pe(de(de(n)),"onTogglePlay",function(){n.videoELement.paused?n.videoELement.play():n.videoELement.pause(),n.setState({firstLoad:!1,isPlaying:!n.videoELement.paused,info:null})}),pe(de(de(n)),"onFullScreen",function(){n.videoELement.requestFullscreen?n.videoELement.requestFullscreen():n.videoELement.mozRequestFullScreen?n.videoELement.mozRequestFullScreen():n.videoELement.webkitRequestFullscreen&&n.videoELement.webkitRequestFullscreen()}),pe(de(de(n)),"onChangeTime",function(e){n.videoELement.currentTime=e}),pe(de(de(n)),"onTimeUpdate",function(){n.setState({currentTime:n.videoELement.currentTime}),n.videoELement.currentTime>50?n.setState({hideAllPortal:!0}):n.setState({hideAllPortal:!1})}),pe(de(de(n)),"onLoadedMetadata",function(){n.setState({duration:Math.round(n.videoELement.duration)})}),pe(de(de(n)),"onLoadedVideo",function(){n.videoELement=document.getElementById("video"),n.videoELement.pause(),n.state.firstLoad&&setTimeout(function(){return document.getElementById("playvideo").click()},500)}),pe(de(de(n)),"renderImageScreen",function(e,t,o,a,i){return r.a.createElement(N,{show:!e,info:t,source:{isVideo:e,srcUrl:o},metadata:a,onHoverPortal:n.onHoverPortal,onBlurPortal:n.onBlurPortal,onClickPortal:n.onClickPortal,onCloseInfo:n.onCloseInfo,isEditorMode:i})}),pe(de(de(n)),"renderVideoScreen",function(e,t,o,a,i,l,c,s,u,d){return r.a.createElement(Z,{isEditorMode:d,show:e,firstLoad:s,info:t,duration:o,currentTime:a,isPlaying:i,hideAllPortal:l,source:{isVideo:e,srcUrl:c},metadata:u,onLoadedMetadata:n.onLoadedMetadata,onTimeUpdate:n.onTimeUpdate,onHoverPortal:n.onHoverPortal,onBlurPortal:n.onBlurPortal,onClickPortal:n.onClickPortal,onCloseInfo:n.onCloseInfo,onPlayClick:n.onPlayClick,onChangeTime:n.onChangeTime,onTogglePlay:n.onTogglePlay,onFullScreen:n.onFullScreen,onLoadedVideo:n.onLoadedVideo})});var i=e.metadata,l=e.screenId,c=i.length>0?i[l]:{type:"image",url:null};return n.state={tooltip:null,info:null,firstLoad:!0,isPlaying:!1,currentTime:0,duration:0,currentScreenMetaData:c,isVideo:"video"===c.type,srcUrl:"video"===c.type?fe[c.url]:me[c.url],hideAllPortal:!1,isSwitching:!1},n.videoELement=null,n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){var e=this,t=document.querySelector("#camera");(new THREE.Vector3).setFromMatrixPosition(t.object3D.matrixWorld);t.addEventListener("componentchanged",function(t){if("rotation"===t.detail.name){var n,o=t.detail.newData,r=o.x,a=o.y,i=o.z;n={x:r,y:a,z:i},e.props.onChangeCamera(n)}})}},{key:"render",value:function(){var e=this.state,t=e.tooltip,n=e.isVideo,o=e.info,a=e.duration,i=e.currentTime,l=e.isPlaying,c=e.hideAllPortal,s=e.srcUrl,u=e.firstLoad,d=e.currentScreenMetaData,p=e.isSwitching,f=this.props.isEditorMode;return r.a.createElement(S.Tooltip,{style:{display:"flex",width:"100%",height:"100%",position:"relative"},open:Boolean(t),unmountHTMLWhenHide:!0,html:r.a.createElement("div",null,t),position:"top-end",followCursor:!0},p?r.a.createElement("div",null):n?this.renderVideoScreen(n,o,a,i,l,c,s,u,d,f):this.renderImageScreen(n,o,s,d,f),f&&r.a.createElement("img",{alt:"",style:{position:"absolute",top:"50%",left:"50%",width:20,height:20,marginLeft:-10,marginTop:-10,zIndex:99},src:"http://babafoundation.org/wp-content/uploads/2018/08/iconmonstr-location-16-icon-256-1.png"}))}}])&&ce(n.prototype,o),a&&ce(n,a),t}(),he=n(272),be=n.n(he),ve=n(273),ye=n.n(ve),Ee=n(275),xe=n.n(Ee),_e=n(182),we=n.n(_e),Pe=n(274),Se=n.n(Pe);function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ce=_()({editor:{width:200,top:0,left:0,bottom:100,zIndex:2,background:"#000000f0",position:"absolute",color:"white"},open:{animation:"open 0.3s linear"},"@keyframes open":{from:{opacity:0,width:0},to:{opacity:1,width:200}},button:{boxShadow:"1px 1px 2px gray",cursor:"pointer",background:"#ad0000","&:hover":{boxShadow:"unset",background:"#400000"}},close:{right:0,position:"absolute",width:30,height:30,background:"#ff0006bd",textAlign:"center",lineHeight:"30px",cursor:"pointer"},title:{textAlign:"center",height:30,lineHeight:"30px",borderBottom:"1px solid white",background:"linear-gradient(to right, #192dbf, #00bbda)"},tool:{background:"blue",bottom:0,display:"flex"},addhotspot:{},flex:{display:"flex"},ExpansionPanelSummary:{height:24,minHeight:"unset"},bottom:{position:"fixed",bottom:0,left:0,right:0,height:100,background:"black",display:"flex",overflow:"auto",alignItems:"center"},screenItem:{height:75,minWidth:80,background:"white",margin:5,color:"black"},selectedScreen:{outline:"5px solid yellow"}})(function(e){var t=e.classes,n=e.onClose,a=e.metadata,i=e.screenId,l=e.onAddHotspot,c=e.position,s=e.onChangeScreen,u=e.onDeleteHotspot,d=ke(Object(o.useState)(!1),2),p=d[0],f=d[1],m=ke(Object(o.useState)(""),2),g=m[0],h=m[1],b=ke(Object(o.useState)(""),2),v=b[0],y=b[1],E=ke(Object(o.useState)(""),2),x=E[0],_=E[1],w=ke(Object(o.useState)(""),2),P=w[0],S=w[1],k=ke(Object(o.useState)("info"),2),C=k[0],T=k[1],I=ke(Object(o.useState)(c.x),2),A=I[0],O=I[1],j=ke(Object(o.useState)(c.y),2),M=j[0],L=j[1],R=ke(Object(o.useState)(c.z),2),z=R[0],N=R[1];Object(o.useEffect)(function(){return O(c.x),L(c.y),void N(c.z)},[e.position]);var U=function(e){return a[e]};return r.a.createElement("div",{className:D()(t.editor,t.open)},r.a.createElement("div",{className:t.close,onClick:n}," X "),r.a.createElement("div",{className:t.title},"VRTour Editor"),"Screen Info ",r.a.createElement("br",null),"Index:".concat(i," "),r.a.createElement("br",null),"ID: ".concat(U(i).id," "),r.a.createElement("br",null),"Name: ".concat(U(i).name," "),r.a.createElement("br",null),"hotspots:",r.a.createElement("div",{className:t.root},U(i).hotspots.map(function(e){return function(e){return r.a.createElement(be.a,{key:e.id},r.a.createElement(ye.a,{expandIcon:r.a.createElement(Se.a,null),className:t.ExpansionPanelSummary},r.a.createElement(we.a,{className:t.heading},"Id:".concat(e.id," "),"- Type:".concat(e.type))),r.a.createElement(xe.a,null,r.a.createElement(we.a,null,"Title: ".concat(e.title),r.a.createElement("br",null),"Tooltip: ".concat(e.tooltip),r.a.createElement("br",null),"Position: ",r.a.createElement("br",null),"- x:".concat(e.position.x," "),r.a.createElement("br",null),"- y:".concat(e.position.y," "),r.a.createElement("br",null),"- z:".concat(e.position.z," "),r.a.createElement("br",null),e.info&&r.a.createElement("span",null,"info: ".concat(e.info),r.a.createElement("br",null)),e.nextId&&r.a.createElement("span",null,"nextId: ".concat(e.nextId),r.a.createElement("br",null)),r.a.createElement("button",{type:"button",onClick:function(){return u(e.id)}},"Delete"))))}(e)})),p&&r.a.createElement("div",{className:t.addhotspot},r.a.createElement("hr",null),"= Add hotspot =",r.a.createElement("br",null),"name: ",r.a.createElement("input",{type:"text",value:g,onChange:function(e){return h(e.target.value)}}),r.a.createElement("br",null),"type:",r.a.createElement("select",{onChange:function(e){T(e.target.value)}},r.a.createElement("option",{checked:"info"===C,value:"info"},"info"),r.a.createElement("option",{checked:"teleport"===C,value:"teleport"},"teleport")),r.a.createElement("br",null),"info"===C?r.a.createElement("span",null,"info: ",r.a.createElement("input",{type:"text",value:v,onChange:function(e){return y(e.target.value)}}),r.a.createElement("br",null)):r.a.createElement("span",null,"next screen:",r.a.createElement("select",{onChange:function(e){return _(e.target.value)}},a.map(function(e){return r.a.createElement("option",{key:e.id,checked:C===e.id,value:e.id},e.name)})),r.a.createElement("br",null)),"tooltip: ",r.a.createElement("input",{type:"text",value:P,onChange:function(e){return S(e.target.value)}}),r.a.createElement("br",null),"x: ",r.a.createElement("input",{type:"text",value:A,onChange:function(e){return O(e.target.value)}}),r.a.createElement("br",null),"y: ",r.a.createElement("input",{type:"text",value:M,onChange:function(e){return L(e.target.value)}}),r.a.createElement("br",null),"z: ",r.a.createElement("input",{type:"text",value:z,onChange:function(e){return N(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("div",{className:t.flex},r.a.createElement("div",{className:D()(t.button),onClick:function(){return e=Math.random().toString(36).substring(2),void l({id:e,position:{x:A,y:M,z:z},radius:"0.5",type:C,info:v,nextId:x,title:"",tooltip:P});var e}},"Apply Hotspot"),"~",r.a.createElement("div",{className:D()(t.button),onClick:function(){return f(!1)}},"Close")),r.a.createElement("hr",null)),r.a.createElement("div",{className:t.tool},!p&&r.a.createElement("div",{className:t.button,onClick:function(){return f(!0)}},"Add hotspot")),r.a.createElement("div",{className:t.bottom},a.map(function(e){return r.a.createElement("div",{key:e.id,className:D()(t.screenItem,(n={},o=t.selectedScreen,a=e.id===U(i).id,o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n)),onClick:function(){return t=e.id,void s(t);var t}},"id: ".concat(e.id),r.a.createElement("br",null),e.name);var n,o,a})),r.a.createElement("div",null))}),Te=_()({wrapper:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex"},spin:{margin:"auto",animation:"spin 2s infinite linear"},"@keyframes spin":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.wrapper},r.a.createElement("img",{alt:"loading img ...",className:t.spin,src:"https://png.pngtree.com/svg/20161201/client_360_degree_view_277665.png"}))}),Ie=n(276),Ae=n.n(Ie);function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var je=_()({app:{width:"100%",height:"100%",position:"relative",overflow:"hidden"},openEditor:{background:"white",position:"absolute",zIndex:2,cursor:"pointer"}})(function(e){var t=e.classes,n=Oe(Object(o.useState)(!1),2),a=n[0],i=n[1],l=Oe(Object(o.useState)(0),2),c=l[0],s=l[1],u=Oe(Object(o.useState)(Ae.a),2),d=u[0],p=u[1],f=Oe(Object(o.useState)(!1),2),m=f[0],g=f[1],h=Oe(Object(o.useState)({x:0,y:0,z:0}),2),b=h[0],v=h[1],y=function(e,t){return t[e]},E=function(){var e=2,t=setInterval(function(){g(!0),(e-=1)<=0&&(clearInterval(t),g(!1))},200)},x=function(e){var t=function(e,t){return P.a.findIndex(t,function(t){return t.id===e})}(e,d);s(t),E()},_=function(e){var t=e.x,n=e.y,o=Math.PI/180,r=10*Math.sin(t*o)+2,a=-Math.sin(n*o)*(10*Math.cos(t*o)),i=-Math.cos(t*o)*Math.cos(n*o)*10;v({x:a,y:r,z:i})};return r.a.createElement("div",{className:t.app},a?r.a.createElement(Ce,{onClose:function(){i(!1)},metadata:d,screenId:c,onAddHotspot:function(e){var t=P.a.cloneDeep(d);y(c,t).hotspots.push(e),p(t),E()},onChangeScreen:x,onChangeCamera:_,onDeleteHotspot:function(e){var t=P.a.cloneDeep(d),n=y(c,t);n.hotspots=P.a.remove(n.hotspots,function(t){return t.id!==e}),p(t),E()},position:b}):r.a.createElement("div",{className:t.openEditor,onClick:function(){i(!0)}},"Open Editor >>>"),m?r.a.createElement(Te,null):r.a.createElement(ge,{metadata:d,isEditorMode:a,screenId:c,onChangeScreen:x,onChangeCamera:_}))}),Me=(n(651),{firebase:new E,authUser:null}),Le=Object(c.c)(p,{app:Me});i.a.render(function(){return r.a.createElement(l.a,{store:Le},r.a.createElement(je,null))},document.querySelector("#sceneContainer"))}});